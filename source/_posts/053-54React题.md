---
title: 053-54React题
tags: ["React"]
categories:
  - 百日博客计划
date: 2023-04-22 17:05:17
description: React相关的题目
---

# 前言

昨天没写。写到类组件和函数组件的对比。

### 函数式编程

一种"编程范式"（programming paradigm），一种编写程序的方法论。它倡导利用简单的执行单元使计算结果不断渐进，最终完成复杂的任务。函数式编程旨在尽可能的提高代码的无状态性和不变性。简单来讲，就是要把过程逻辑写成函数，定义好输入参数，只关心它的输出结果。
编程范式主要有三种：命令式编程、声明式编程，以及函数式编程。
- 与命令式的区别：它关注执行结果，命令式更强调执行过程。
- 与声明式的区别：它并不需要进一步抽象封装成类（声明式编程，我理解就是多了类）。

- 优点：
  - 更简单的复用，不用考虑内部变化和外部影响
  - 更好的管理状态，提倡无状态，或者说更少的状态，能更大程度的减少未知情况，减少意外错误。
  - 代码可组合
- 缺点：
  - 性能开销，对方法的过度包装，从而产生上下文切换的性能开销。
  - 资源占用，为了实现对象状态的不可变，往往会创建新的对象。
  - 递归陷阱：在函数式编程中，为了实现迭代，通常会采用递归操作，会造成性能开销。为了优化，我们往往需要写成**尾递归**形式。

#### 纯函数

给定的输入参数，会返回相同的结果，并且所有的数据是不可变的。纯函数=无状态+数据不可变。

#### 副作用

执行了与返回值无关的事件，如修改了全局变量，修改了传入的参数，发送请求（useEffect）等等。即数据不可变。

#### 个人理解

日常前端开发三种都会使用，以命令式为主，当需要提高代码的复用性，减少重复的时候，会将一些代码抽离成函数。声明式编程会少一些，因为前端对类的使用会少一些。近些前端框架都开始强调函数式编程，大势所趋。

### 类组件和函数组件的区别

**编写方式**
类组件需要继承`Component`对象，并需要用`render`函数包装返回的JSX对象。
```js
// 函数组件
function Welcome(props) {
  return <h1>Hello, {props.name}</h1>;
}
// 类组件
class Welcome extends React.Component {
  render() {
    return <h1>Hello, {this.props.name}</h1>;
  }
}
```

**状态管理**
类组件中，使用`this.state`设置初始状态，通过`this.setState()`重新覆盖状态；
函数组件中，通过React的`useState`，获取状态和对应setter。如通过`const [count, setCount] = React.useState(0);`可设置count状态。

**生命周期**
函数组件通过 useEffect Hook 对应着类组件的 componentDidMount，componentDidUpdate 和 componentWillUnmount 这三个函数。
`useEffect(fn[,list])`接收两个参数，fn回调函数，list是个数组，参数的不同情况对应不同的周期函数：
- 为空时，相当于`componentDidMount`，`componentDidUpdate`，每次渲染都会触发；
- 为空数组`[]`时，用于模拟 `componentDidMount` 挂载完成
- 不为空时，数组中的任意一个状态发生变化，都会触发程序，相当于`componentDidUpdate`
- 当`fn`中返回一个函数A时，当组件卸载时，会触发，用于模拟 `componentWillUnmount`

**调用方式**
React内部使用类组件时，首先需要创建一个组件实例，再调用render获取组件内容。而函数组件直接执行函数即可。