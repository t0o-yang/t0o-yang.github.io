---
title: 028JS基础第二天
categories: 百日博客计划
date: 2023-03-27 21:29:40
tags: ["JS","作用域","闭包","this对象"]
description: var,let,const; 作用域、作用域链；闭包；this对象
---

# 前言

博客内容要调整一下了，仅记录一下当天干了什么吧。因为涉及到的面试题的答案，也是从网上找来的，不是自己总结的。本质上就是个日志。

### var、let和const

var、let、const都是声明变量的关键词，主要区别是

1. 变量提升，var声明的变量会出现变量提升的情况，即可以在声明前使用变量；let和const声明前使用会报错；

2. 暂时性死区，var不存在，let和const存在，在声明语句之前，不能获取和设置变量；

3. 作用域不同，let和const作用于块级作用域，var作用于函数作用域；

4. 重新赋值，const声明的是一个常量，值不能改变。let，var可以；

5. 重复声明，let和const在同一作用域内不能重复声明，var不限制；

### 作用域、作用域链

**作用域**指变量和函数能够被访问的区域，作用域可分为：
- 全局作用域，在函数和大括号之外声明的变量，都在全局作用域下，可以在程序的任意位置访问；
- 函数作用域，在函数内声明的变量，只能在函数内部访问；
- 块级作用域，在大括号内使用`let`和`const`声明的变量，只存在于块级作用域内，在大括号外不能访问；

**作用域链**：在JS中使用变量时，首先JS引擎会在当前作用域中寻找该变量，如果没找到，会到其上层作用域寻找，直至变量找到或到了全局作用域。如果在全局作用域内没有找到，会隐式声明该变量（非严格模式下，返回 undefined）或直接报错。

### 闭包

**闭包**指一个函数和对其周围状态的引用捆绑在一起，即闭包让内层函数可以访问到外层函数的作用域。
闭包的使用场景：保存变量（延长变量的生命周期）；保护变量（创建私有化变量）。例子，柯里化函数

### this对象

this对象是函数运行时自动生成的一个内部对象，只能在函数内使用。它始终指向调用这个函数的对象。在不同的使用场合下，this有不同的值，大致可以分为以下4种：
- 默认绑定，普通函数调用，this指向`window`；
- 隐式绑定，函数作为对象的方法被调用，this指向这个对象；
- new 绑定，作为构造函数调用，new 会返回一个实例对象，this指向这个实例对象，特殊情况
  - 遇到函数返回一个对象，则this指向返回的对象
```js
function fn()  
{  
    this.user = 'xxx';  
    return {};  
}
var a = new fn();  
console.log(a.user); //undefined
```
  - 返回一个简单类型的数据，则this还是指向实例对象
```js
function fn()  
{  
    this.user = 'xxx';  
    return 1;
}
var a = new fn;  
console.log(a.user); //xxx
```
- 显式绑定，使用`call`、`apply`、`bind`可以显式改变函数的this指向
- 箭头函数的this，箭头函数没有自己的this指向，它的this指向上一级作用域的this