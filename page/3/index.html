<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>ylog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="ylog">
<meta property="og:url" content="http://example.com/page/3/index.html">
<meta property="og:site_name" content="ylog">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="yh0ng">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="ylog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">ylog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-043React学习开始" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/04/11/043React%E5%AD%A6%E4%B9%A0%E5%BC%80%E5%A7%8B/" class="article-date">
  <time class="dt-published" datetime="2023-04-10T16:00:00.000Z" itemprop="datePublished">2023-04-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%99%BE%E6%97%A5%E5%8D%9A%E5%AE%A2%E8%AE%A1%E5%88%92/">百日博客计划</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/04/11/043React%E5%AD%A6%E4%B9%A0%E5%BC%80%E5%A7%8B/">043React学习1</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>没复习，React 学习开始，以下是一些问题，带着问题学习</p>
<h3 id="说说对-React-的理解"><a href="#说说对-React-的理解" class="headerlink" title="说说对 React 的理解"></a>说说对 React 的理解</h3><ul>
<li>是什么</li>
<li>特点</li>
<li>优缺点</li>
</ul>
<p>是什么：JS 框架；</p>
<p>特点：<br>单向数据绑定；<br>虚拟 DOM；<br>组件化；</p>
<p>优缺点：优点，页面渲染更高效。缺点，学习成本较高。</p>
<h3 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a>JSX</h3><ul>
<li>是什么</li>
<li>特点</li>
<li>与其他方案的对比</li>
</ul>
<p>是什么：视图逻辑与 UI 的结构耦合<br>特点：<br>常规的 html 代码与 JSX 兼容；<br>可以直接嵌入表达式；<br>可以包含子元素；<br>命名规范（属性名要用驼峰，自定义属性名加上前缀<code>data-</code>）；<br>对比：<br>与 vueJS 的模板语法相比，不需要加入新的语法，不需要学习，直接上手。</p>
<h3 id="虚拟-DOM"><a href="#虚拟-DOM" class="headerlink" title="虚拟 DOM"></a>虚拟 DOM</h3><ul>
<li>是什么</li>
<li>React 中的使用</li>
</ul>
<p>。。。。</p>
<h3 id="什么是组件"><a href="#什么是组件" class="headerlink" title="什么是组件"></a>什么是组件</h3><p>静态结构和代码逻辑的组合，通过引入，可以在其他页面中快速使用<br>React 中组件分为类组件和函数组件</p>
<h3 id="state-和-props-的区别"><a href="#state-和-props-的区别" class="headerlink" title="state 和 props 的区别"></a>state 和 props 的区别</h3><p>state 是组件的数据模型，只能在组件内访问，可以认为是组件的“私有属性”。只能通过<code>setState</code>的方式修改数据，state 的更新是异步的。<br>props 用于组件间的通信，即数据传入。所有的 props 都是只读的 immutable</p>
<h3 id="react-组件生命周期"><a href="#react-组件生命周期" class="headerlink" title="react 组件生命周期"></a>react 组件生命周期</h3><p>创建前后；挂载前后；更新前后；销毁前后</p>
<ol>
<li>Mounting： 创建虚拟 DOM，渲染 UI；</li>
<li>Updating： 更新虚拟 DOM，重新渲染 UI；</li>
<li>Unmounting: 删除虚拟 DOM，移除 UI</li>
</ol>
<p><strong>类组件</strong>中的生命周期钩子：<br>componentDidMount<br>componentDidUpdate<br>componentWillUnmount</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/04/11/043React%E5%AD%A6%E4%B9%A0%E5%BC%80%E5%A7%8B/" data-id="clgce8adf0000s4aaei629l6v" data-title="043React学习1" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/" rel="tag">React</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-042slot" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/04/10/042slot/" class="article-date">
  <time class="dt-published" datetime="2023-04-10T15:55:28.000Z" itemprop="datePublished">2023-04-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%99%BE%E6%97%A5%E5%8D%9A%E5%AE%A2%E8%AE%A1%E5%88%92/">百日博客计划</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/04/10/042slot/">042slot</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>坚持不下去了，有种被赶着走的感觉。没有复习。今天两场面试，岗位都一样。</p>
<h3 id="插槽slot"><a href="#插槽slot" class="headerlink" title="插槽slot"></a>插槽slot</h3><p>网页结构占位符，分为<code>默认插槽</code>、<code>具名插槽</code>、<code>作用域插槽</code>：</p>
<ul>
<li>默认插槽</li>
<li>具名插槽，<code>slot</code>上加上<code>name</code>属性，标注插槽名。父组件使用时通过<code>&lt;template v-slot:default&gt;默认插槽&lt;/template&gt;</code>的方式，将具体内容加到子组件的指定位置上。<code>v-slot:</code>可简写成<code>#</code></li>
<li>作用域插槽<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--子组件 Child.vue--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">testProps</span>=<span class="string">&quot;子组件的值&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">h3</span>&gt;</span>没传footer插槽<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--父组件 Parent.vue--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">child</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!-- 把v-slot的值指定为作⽤域上下⽂对象 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>=<span class="string">&quot;slotProps&quot;</span>&gt;</span></span><br><span class="line">      来⾃⼦组件数据：&#123;&#123;slotProps.testProps&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>=<span class="string">&quot;slotProps&quot;</span>&gt;</span></span><br><span class="line">      来⾃⼦组件数据：&#123;&#123;slotProps.testProps&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/04/10/042slot/" data-id="clgb1377b0000zsaa5jdlgw3w" data-title="042slot" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/" rel="tag">Vue</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/slot/" rel="tag">slot</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-041DNS服务" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/04/09/041DNS%E6%9C%8D%E5%8A%A1/" class="article-date">
  <time class="dt-published" datetime="2023-04-09T14:48:18.000Z" itemprop="datePublished">2023-04-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%99%BE%E6%97%A5%E5%8D%9A%E5%AE%A2%E8%AE%A1%E5%88%92/">百日博客计划</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/04/09/041DNS%E6%9C%8D%E5%8A%A1/">041DNS服务</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="DNS服务"><a href="#DNS服务" class="headerlink" title="DNS服务"></a>DNS服务</h3><p>DNS：域名系统，将域名与对应的IP进行转换的服务系统；</p>
<p>解析域名的过程如下：</p>
<ol>
<li><p>首先搜索浏览器的 DNS 缓存，缓存中维护一张域名与 IP 地址的对应表</p>
</li>
<li><p>若没有命中，则继续搜索操作系统的 DNS 缓存</p>
</li>
<li><p>若仍然没有命中，则操作系统将域名发送至本地域名服务器，本地域名服务器采用递归查询自己的 DNS 缓存，查找成功则返回结果</p>
</li>
<li><p>若本地域名服务器的 DNS 缓存没有命中，则本地域名服务器向上级域名服务器进行迭代查询</p>
<ol>
<li>首先本地域名服务器向根域名服务器发起请求，根域名服务器返回顶级域名服务器的地址给本地服务器</li>
<li>本地域名服务器拿到这个顶级域名服务器的地址后，就向其发起请求，获取权限域名服务器的地址</li>
<li>本地域名服务器根据权限域名服务器的地址向其发起请求，最终得到该域名对应的 IP 地址</li>
<li>本地域名服务器将得到的 IP 地址返回给操作系统，同时自己将 IP 地址缓存起来</li>
</ol>
</li>
<li><p>操作系统将 IP 地址返回给浏览器，同时自己也将 IP 地址缓存起</p>
</li>
<li><p>至此，浏览器就得到了域名对应的 IP 地址，并将 IP 地址缓存起</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/04/09/041DNS%E6%9C%8D%E5%8A%A1/" data-id="clg9iwl2c000084aa99762avm" data-title="041DNS服务" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DNS/" rel="tag">DNS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag">网络</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-040仿Vue3实现数据绑定" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/04/08/040%E4%BB%BFVue3%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A/" class="article-date">
  <time class="dt-published" datetime="2023-04-08T15:36:09.000Z" itemprop="datePublished">2023-04-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%99%BE%E6%97%A5%E5%8D%9A%E5%AE%A2%E8%AE%A1%E5%88%92/">百日博客计划</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/04/08/040%E4%BB%BFVue3%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A/">040仿Vue3实现数据绑定</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>实现还存在不足之处：</p>
<ol>
<li>对嵌套对象，依赖会有重复；</li>
</ol>
<p>more.like 应该和 name 一样只有两个依赖，但是这里存在四个<br><img src="/../images/dependency%202023-04-08%20232544.png" alt="重复依赖"></p>
<ol start="2">
<li>目前，对一个状态修改，会造成所有订阅者做 update 操作;</li>
</ol>
<p>更新 more.like，会通知 name 更新<br><img src="/../images/updateAll20230408233206.png" alt="所有订阅者更新"></p>
<ol start="3">
<li>需要用 Vue.createApp 的形式绑定 this，之后调用 mount，与 Vue3 原版不同</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123; createApp &#125; = <span class="title class_">Vue</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&quot;蛋老师&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">more</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">like</span>: <span class="string">&quot;一键三连&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript">  app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="vue3-数据绑定"><a href="#vue3-数据绑定" class="headerlink" title="vue3 数据绑定"></a>vue3 数据绑定</h4><p>html 代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>阿婆主：&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>更多：&#123;&#123;more.like&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;more.like&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./vue3数据绑定.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp &#125; = <span class="title class_">Vue</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">name</span>: <span class="string">&quot;蛋老师&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">more</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">like</span>: <span class="string">&quot;一键三连&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>绑定代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * TODO：</span></span><br><span class="line"><span class="comment"> * 1. 对嵌套对象，依赖会有重复；</span></span><br><span class="line"><span class="comment"> * 2. 目前，对一个状态修改，会造成所有订阅者做update操作</span></span><br><span class="line"><span class="comment"> * 3. 需要用 Vue.createApp 的形式绑定this，之后调用mount，与Vue3原版不同</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Vue</span> = &#123;</span><br><span class="line">  <span class="attr">$el</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">$data</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">createApp</span>: <span class="keyword">function</span> (<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$data</span> = <span class="title function_">reactive</span>(obj.<span class="title function_">data</span>());</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mount</span>: <span class="keyword">function</span> (<span class="params">el</span>) &#123;</span><br><span class="line">    <span class="title class_">Compile</span>(el, <span class="variable language_">this</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模板解析，替换DOM</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Compile</span>(<span class="params">element, vm</span>) &#123;</span><br><span class="line">  vm.<span class="property">$el</span> = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(element);</span><br><span class="line">  <span class="keyword">const</span> fragment = <span class="variable language_">document</span>.<span class="title function_">createDocumentFragment</span>();</span><br><span class="line">  <span class="keyword">let</span> child;</span><br><span class="line">  <span class="keyword">while</span> ((child = vm.<span class="property">$el</span>.<span class="property">firstChild</span>)) &#123;</span><br><span class="line">    fragment.<span class="title function_">append</span>(child);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">fragment_compile</span>(fragment);</span><br><span class="line">  <span class="comment">// 替换内容</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">fragment_compile</span>(<span class="params">node</span>) &#123;</span><br><span class="line">    <span class="comment">// 正则匹配模板语法，如 &#123;&#123; name &#125;&#125;</span></span><br><span class="line">    <span class="keyword">const</span> pattern = <span class="regexp">/\&#123;\&#123;\s*(\S+)\s*\&#125;\&#125;/</span>;</span><br><span class="line">    <span class="keyword">if</span> (node.<span class="property">nodeType</span> === <span class="number">3</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> xxx = node.<span class="property">nodeValue</span>;</span><br><span class="line">      <span class="keyword">let</span> result = pattern.<span class="title function_">exec</span>(node.<span class="property">nodeValue</span>);</span><br><span class="line">      <span class="keyword">if</span> (result) &#123;</span><br><span class="line">        <span class="keyword">const</span> arr = result[<span class="number">1</span>].<span class="title function_">split</span>(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">        <span class="keyword">const</span> value = arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">total, current</span>) =&gt;</span> total[current], vm.<span class="property">$data</span>);</span><br><span class="line">        node.<span class="property">nodeValue</span> = xxx.<span class="title function_">replace</span>(pattern, value);</span><br><span class="line">        <span class="comment">// 创建订阅者</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Watcher</span>(vm, result[<span class="number">1</span>], <span class="function">(<span class="params">newValue</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;替换DOM &quot;</span>, newValue);</span><br><span class="line">          node.<span class="property">nodeValue</span> = xxx.<span class="title function_">replace</span>(pattern, newValue);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (node.<span class="property">nodeType</span> === <span class="number">1</span> &amp;&amp; node.<span class="property">nodeName</span> === <span class="string">&quot;INPUT&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> attr = <span class="title class_">Array</span>.<span class="title function_">from</span>(node.<span class="property">attributes</span>);</span><br><span class="line">      attr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">i</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (i.<span class="property">nodeName</span> === <span class="string">&quot;v-model&quot;</span>) &#123;</span><br><span class="line">          <span class="keyword">const</span> value = i.<span class="property">nodeValue</span></span><br><span class="line">            .<span class="title function_">split</span>(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">            .<span class="title function_">reduce</span>(<span class="function">(<span class="params">total, current</span>) =&gt;</span> total[current], vm.<span class="property">$data</span>);</span><br><span class="line">          node.<span class="property">value</span> = value;</span><br><span class="line">          <span class="keyword">new</span> <span class="title class_">Watcher</span>(vm, i.<span class="property">nodeValue</span>, <span class="function">(<span class="params">newValue</span>) =&gt;</span> &#123;</span><br><span class="line">            node.<span class="property">value</span> = newValue;</span><br><span class="line">          &#125;);</span><br><span class="line">          node.<span class="title function_">addEventListener</span>(<span class="string">&quot;input&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// [&#x27;more&#x27;,&#x27;like&#x27;]</span></span><br><span class="line">            <span class="keyword">const</span> arr1 = i.<span class="property">nodeValue</span>.<span class="title function_">split</span>(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">            <span class="comment">// [&#x27;more&#x27;]</span></span><br><span class="line">            <span class="keyword">const</span> arr2 = arr1.<span class="title function_">slice</span>(<span class="number">0</span>, arr1.<span class="property">length</span> - <span class="number">1</span>);</span><br><span class="line">            <span class="comment">// vm.$data.more</span></span><br><span class="line">            <span class="keyword">const</span> final = arr2.<span class="title function_">reduce</span>(</span><br><span class="line">              <span class="function">(<span class="params">total, current</span>) =&gt;</span> total[current],</span><br><span class="line">              vm.<span class="property">$data</span></span><br><span class="line">            );</span><br><span class="line">            final[arr1[arr1.<span class="property">length</span> - <span class="number">1</span>]] = e.<span class="property">target</span>.<span class="property">value</span>;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    node.<span class="property">childNodes</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">child</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">fragment_compile</span>(child);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// DOM 回填</span></span><br><span class="line">  vm.<span class="property">$el</span>.<span class="title function_">appendChild</span>(fragment);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 依赖，收集并通知订阅者</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dependency</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">subscribers</span> = [];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 收集订阅者</span></span><br><span class="line">  <span class="title function_">addSub</span>(<span class="params">sub</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">subscribers</span>.<span class="title function_">push</span>(sub);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 通知订阅者</span></span><br><span class="line">  <span class="title function_">notify</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">subscribers</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">sub</span>) =&gt;</span> &#123;</span><br><span class="line">      sub.<span class="title function_">update</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 订阅者</span></span><br><span class="line"><span class="comment"> * 做什么：视图变化时，修改数据模型</span></span><br><span class="line"><span class="comment"> * 什么时候创建：模板解析时，就创建</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Watcher</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">vm, key, callback</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vm</span> = vm;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">key</span> = key;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">callback</span> = callback;</span><br><span class="line">    <span class="comment">// 临时属性</span></span><br><span class="line">    <span class="title class_">Dependency</span>.<span class="property">temp</span> = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="comment">// 触发getter，会执行 Proxy.get</span></span><br><span class="line">    key.<span class="title function_">split</span>(<span class="string">&quot;.&quot;</span>).<span class="title function_">reduce</span>(<span class="function">(<span class="params">total, current</span>) =&gt;</span> total[current], vm.<span class="property">$data</span>);</span><br><span class="line">    <span class="title class_">Dependency</span>.<span class="property">temp</span> = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">update</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> value = <span class="variable language_">this</span>.<span class="property">key</span></span><br><span class="line">      .<span class="title function_">split</span>(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">      .<span class="title function_">reduce</span>(<span class="function">(<span class="params">total, current</span>) =&gt;</span> total[current], <span class="variable language_">this</span>.<span class="property">vm</span>.<span class="property">$data</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">callback</span>(value);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// // 创建依赖</span></span><br><span class="line"><span class="keyword">const</span> dependency = <span class="keyword">new</span> <span class="title class_">Dependency</span>();</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reactive</span>(<span class="params">data_obj</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> data_obj !== <span class="string">&quot;object&quot;</span> &amp;&amp; data_obj != <span class="literal">null</span>) <span class="keyword">return</span> obj;</span><br><span class="line">  <span class="comment">// 代理 数据对象</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Proxy</span>(data_obj, &#123;</span><br><span class="line">    <span class="attr">get</span>: <span class="keyword">function</span> (<span class="params">target, propKey, receiver</span>) &#123;</span><br><span class="line">      <span class="comment">// 订阅者加入依赖实例的数组中</span></span><br><span class="line">      <span class="title class_">Dependency</span>.<span class="property">temp</span> &amp;&amp; dependency.<span class="title function_">addSub</span>(<span class="title class_">Dependency</span>.<span class="property">temp</span>);</span><br><span class="line">      <span class="keyword">const</span> value = <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, propKey, receiver);</span><br><span class="line">      <span class="comment">// console.log(`获取 $&#123;propKey&#125;---$&#123;value&#125;`)</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">typeof</span> value === <span class="string">&quot;object&quot;</span> ? <span class="title function_">reactive</span>(value) : value;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">set</span>: <span class="keyword">function</span> (<span class="params">target, propKey, value, receiver</span>) &#123;</span><br><span class="line">      <span class="comment">// console.log(`设置 $&#123;propKey&#125;---$&#123;JSON.stringify(value)&#125;`);</span></span><br><span class="line">      <span class="comment">// // todo: 并没有指定 propKey，会触发所有订阅者</span></span><br><span class="line">      <span class="keyword">const</span> rs = <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, propKey, value, receiver);</span><br><span class="line">      dependency.<span class="title function_">notify</span>();</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">dir</span>(dependency);</span><br><span class="line">      <span class="keyword">return</span> rs;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/04/08/040%E4%BB%BFVue3%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A/" data-id="clgf98scn0000asaab1bn1dmm" data-title="040仿Vue3实现数据绑定" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/" rel="tag">Vue</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-039keepalive" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/04/07/039keepalive/" class="article-date">
  <time class="dt-published" datetime="2023-04-07T15:07:01.000Z" itemprop="datePublished">2023-04-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%99%BE%E6%97%A5%E5%8D%9A%E5%AE%A2%E8%AE%A1%E5%88%92/">百日博客计划</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/04/07/039keepalive/">039keepalive</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="keep-alive的实现"><a href="#keep-alive的实现" class="headerlink" title="keep-alive的实现"></a>keep-alive的实现</h3><p>作用：实现组件缓存，保持这些组件的状态，以避免反复渲染导致的性能问题。 需要缓存组件 频繁切换，不需要重复渲染<br>场景：tabs标签页 后台导航，vue性能优化<br>原理：Vue.js内部将DOM节点抽象成了一个个的VNode节点，keep-alive组件的缓存也是基于VNode节点的而不是直接存储DOM结构。它将满足条件（pruneCache与pruneCache）的组件在cache对象中缓存起来，在需要重新渲染的时候再将vnode节点从cache对象中取出并渲染。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/04/07/039keepalive/" data-id="clg6on2dz00002waa97vi6kpu" data-title="039keepalive" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/keep-alive/" rel="tag">keep-alive</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Python语言实现KNN算法" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/04/06/Python%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0KNN%E7%AE%97%E6%B3%95/" class="article-date">
  <time class="dt-published" datetime="2023-04-06T07:58:00.591Z" itemprop="datePublished">2023-04-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/04/06/Python%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0KNN%E7%AE%97%E6%B3%95/">python实现KNN算法</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="实现knn算法"><a href="#实现knn算法" class="headerlink" title="实现knn算法"></a>实现knn算法</h1><h2 id="knn算法介绍"><a href="#knn算法介绍" class="headerlink" title="knn算法介绍"></a>knn算法介绍</h2><p><strong>knn（k-NearestNeighbor），中译：k最近邻分类算法</strong>。算法要完成的事情是：一组已分类数据集，一组待分数据，根据knn算法将待分数据分好类。<br>明白要做什么，这个过程的分类准则就是knn算法。其<strong>核心</strong>就是，<strong>由近邻数据的类别决定待分数据的类别。</strong><br>那么判断是否为近邻又由什么决定呢？——距离，确切来说是，<strong>欧式距离</strong>。空间中有两个点 a(x<del>0</del>, y<del>0</del>)，b(x<del>1</del>, y<del>1</del>) ，两点之间的距离就是欧式距离。公式请自查。<br>放图说话，下图都是表示knn决策过程。</p>
<p><img src="/../images/knn%E5%86%B3%E7%AD%96%E8%BF%87%E7%A8%8B.png" alt="knn决策过程1"></p>
<p><img src="/../images/knn%E5%86%B3%E7%AD%96%E8%BF%87%E7%A8%8B2.png" alt="knn决策过程2"></p>
<p>其也能进行回归分析，详细内容请参考<strong>近邻算法_百度百科</strong>，点击<a target="_blank" rel="noopener" href="https://www.baidu.com/link?url=STA-SNpUskTFahm4e40lxLoFauAOQgU2ZejmD9LERZko7zXJpW5C3PEdGUlxTOckkYhWDP8yF9xD8FoAwGvoJBEZXn_rX5hLee-0oG3Fln-UYxQBDsGNuPlpr8C6MvB0ARBLxkG6gfxCQkhCbKXX5PoutWn5P9lx9B2YraqG68_&wd=&eqid=dbdd4a310075fec5000000035da0a9be">这里</a>。</p>
<h2 id="算法步骤及实现"><a href="#算法步骤及实现" class="headerlink" title="算法步骤及实现"></a>算法步骤及实现</h2><p><strong>具体实现参考了近邻算法_百度百科</strong>，下面将算法步骤和算法实现放在一起。</p>
<h3 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h3><p>数据存取方式采用<strong>操作列表</strong>的方式，这里考虑的是熟练度。当然<strong>推荐选择导入 Numpy ，操作效率更高</strong>。</p>
<h3 id="算法流程图"><a href="#算法流程图" class="headerlink" title="算法流程图"></a>算法流程图</h3><p><img src="/../images/knn%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt="流程图"></p>
<h3 id="1-训练集和测试集"><a href="#1-训练集和测试集" class="headerlink" title="1.训练集和测试集"></a>1.训练集和测试集</h3><p>先获取训练集数据和测试集数据，实现过程中先采用的训练集和测试集是，自编的简单数据。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">myDataset = &#123;<span class="string">&#x27;data&#x27;</span>:[[<span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">5</span>, <span class="number">6</span>, <span class="number">0</span>, <span class="number">0</span>]],</span><br><span class="line">             <span class="string">&#x27;target&#x27;</span>:[<span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>]&#125;</span><br><span class="line">X_train, y_train = myDataset[<span class="string">&#x27;data&#x27;</span>], myDataset[<span class="string">&#x27;target&#x27;</span>]</span><br><span class="line">X_test = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>],[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]]</span><br></pre></td></tr></table></figure>

<p>具体真正使用的训练集和测试集是，鸢尾花数据集。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iris_dataset = load_iris()</span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(iris_dataset[<span class="string">&#x27;data&#x27;</span>], iris_dataset[<span class="string">&#x27;target&#x27;</span>], random_state=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<h3 id="2-设定k值"><a href="#2-设定k值" class="headerlink" title="2.设定k值"></a>2.设定k值</h3><p>k值，是决定了待测数据 X_test 会有 k 个邻居。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n_neighbors</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;指定近邻个数&#x27;&#x27;&#x27;</span></span><br><span class="line">    self.n_neighbors = n_neighbors <span class="comment"># 近邻数</span></span><br><span class="line">    <span class="comment"># self.x_new = [] # 预测数据集</span></span><br></pre></td></tr></table></figure>

<h3 id="3-创建预先序列"><a href="#3-创建预先序列" class="headerlink" title="3.创建预先序列"></a>3.创建预先序列</h3><p>百科中第四步，<strong>优先级队列</strong>在本文名为：<strong>预先序列</strong> 。预先序列其实就是近邻序列，其大小等于 k ，具体说是，预先序列计算处理得到的距离的预先序列 <strong>distList</strong> 。关于创建预先序列的用途，我的理解是，<strong>当 k &gt; 1时，即待分数据会有 k 个邻居时，在不采用预先序列的情况下，同样的，会产生一个 k 大小的近邻序列，并且在生成序列过程中第 i ( i &lt; k ) 个数据都需要进行判断数据是否需要更新。而采用了预先序列，每次比大小的两方，一个是训练数据集，另一个就会变成 distList 中的最大值，更新最大值即可，会减少判断次数。</strong><br><code>使用每个数据的ID(索引)建立预先序列</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.idList = random.sample(<span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(x_train)), self.n_neighbors) <span class="comment"># 获取空间大小为k的预先序列,k个随机的元组,k=n_neighbors</span></span><br></pre></td></tr></table></figure>

<p><code>计算距离</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_deftDist</span>(<span class="params">self, tp</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;计算测试数据与预先序列的距离&#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="built_in">list</span> = [] <span class="comment"># 存放预测数据与预先序列的距离，列表含有k个距离</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    for i in range(len(self.x_new)):</span></span><br><span class="line"><span class="string">        tp = self.x_new[i]</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(self.idList)):</span><br><span class="line">        <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">        index = self.idList[j]</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(tp)):</span><br><span class="line">            <span class="built_in">sum</span> += (tp[k]-self.x_train[index][k])**<span class="number">2</span> </span><br><span class="line">        <span class="built_in">sum</span> = math.sqrt(<span class="built_in">sum</span>)</span><br><span class="line">        <span class="built_in">list</span>.append(<span class="built_in">sum</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">list</span></span><br></pre></td></tr></table></figure>

<h3 id="4-更新预先序列"><a href="#4-更新预先序列" class="headerlink" title="4.更新预先序列"></a>4.更新预先序列</h3><p>遍历训练集，计算当前训练集数据 X_train<del>i</del> 与待分数据 X_test<del>j</del> 的距离 L ，比较 L 与预先的最大距离 LMax 大小，若大于，直接进入下一训练集数据 X_train<del>i+1</del> ，若小于，将 LMax 对应的序列数据替换成 X_train<del>i</del> 。<br><strong>在需要替换时，其实还需要一步判断，在构建预先序列时，K个随机值构成的 idList 可能已经包含了当前训练集数据 X_train_i 的索引值即 i ，所以如果替换元素的话，近邻队列不就出现1或多个重复的元素了吗？，那么分类应该会有误差</strong>。参考百科中的第 6 步，似乎没有考虑到。<br><code>解决上文提到的 “ 判断 ” </code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> j <span class="keyword">not</span> <span class="keyword">in</span> self.idList:</span><br><span class="line">    index = distList.index(Lmax) <span class="comment"># 获取最大预先距离的索引</span></span><br><span class="line">    self.idList[index] = j <span class="comment"># 换为当前训练数据的id</span></span><br><span class="line">    distList[index] = L <span class="comment"># 更新最大预先距离</span></span><br></pre></td></tr></table></figure>

<p><code>算法当前步骤所有代码</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">distList = self.get_deftDist(tp) <span class="comment"># 获取此时测试数据x_new[i]与预先序列的距离</span></span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(self.x_train)):</span><br><span class="line">    Lmax = <span class="built_in">max</span>(distList)</span><br><span class="line">    L = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(self.x_train[j])):</span><br><span class="line">        L += (tp[k]-self.x_train[j][k])**<span class="number">2</span> <span class="comment"># 遍历训练集，计算当前x_new[i]训练集与x_train[j]的距离</span></span><br><span class="line">    L = math.sqrt(L)</span><br><span class="line">    <span class="keyword">if</span> L &gt;= Lmax:</span><br><span class="line">        <span class="keyword">continue</span> <span class="comment"># 若当前所得距离大于预先序列距离的最大值，进入下一个训练数据</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># 更新预先序列中的距离和对应训练数据的id</span></span><br><span class="line">        <span class="keyword">if</span> j <span class="keyword">not</span> <span class="keyword">in</span> self.idList:</span><br><span class="line">            index = distList.index(Lmax) <span class="comment"># 获取最大预先距离的索引</span></span><br><span class="line">            self.idList[index] = j <span class="comment"># 换为当前训练数据的id</span></span><br><span class="line">            distList[index] = L <span class="comment"># 更新最大预先距离</span></span><br></pre></td></tr></table></figure>

<h3 id="5-获取测试集所属类"><a href="#5-获取测试集所属类" class="headerlink" title="5.获取测试集所属类"></a>5.获取测试集所属类</h3><p>遍历最后的近邻序列，选择出其中多数类，得出测试数据集的所需类。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">flag = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span> m <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(self.idList)): <span class="comment"># 遍历预先序列中，计算其中的多数类，判断测试数据属于哪类</span></span><br><span class="line">        indI = self.idList[m]</span><br><span class="line">        targetI = self.y_train[indI]</span><br><span class="line">        <span class="keyword">if</span> targetI == <span class="number">0</span>:</span><br><span class="line">            flag[<span class="number">0</span>] += <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> targetI == <span class="number">1</span>:</span><br><span class="line">            flag[<span class="number">1</span>] += <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> targetI == <span class="number">2</span>:</span><br><span class="line">            flag[<span class="number">2</span>] += <span class="number">1</span></span><br><span class="line">        <span class="comment">#print(flag)</span></span><br><span class="line">    <span class="comment">#print(&#x27;测试数据所属类: &#x27;, flag.index(max(flag)))</span></span><br><span class="line">    targetList.append(flag.index(<span class="built_in">max</span>(flag))) <span class="comment"># 返回第一个极大值的索引值</span></span><br></pre></td></tr></table></figure>

<h3 id="预测模型的精准度"><a href="#预测模型的精准度" class="headerlink" title="预测模型的精准度"></a>预测模型的精准度</h3><p>除了上述knn算法的五个步骤外，还额外添加了计算模型的精确值的方法 score() 。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">score</span>(<span class="params">self, y_pre, y_test</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;计算精确值&#x27;&#x27;&#x27;</span></span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    scoreList = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x: x[<span class="number">0</span>]-x[<span class="number">1</span>], <span class="built_in">zip</span>(y_pre, y_test)))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> scoreList:</span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">    score = count/<span class="built_in">len</span>(scoreList)</span><br><span class="line">    <span class="keyword">return</span> score</span><br></pre></td></tr></table></figure>

<h2 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h2><p>算法结构是<strong>仿照 KNeighborsClassifier</strong>的使用过程。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">knn = KNeighborsClassifier(n_neighbors=<span class="number">31</span>) <span class="comment">#设定近邻指标</span></span><br><span class="line"></span><br><span class="line">knn.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line">y_pre = knn.predict(X_test)</span><br><span class="line"></span><br><span class="line">score = knn.score(X_test, y_test)</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>KNeighborsClassifier</th>
<th>MyKNN</th>
<th>MykNN的方法功能</th>
</tr>
</thead>
<tbody><tr>
<td>–init–()</td>
<td>–init–()</td>
<td>设定近邻个数</td>
</tr>
<tr>
<td>fit()</td>
<td>get_trainData()</td>
<td>获取训练集数据</td>
</tr>
<tr>
<td>predict()</td>
<td>predict()</td>
<td>产生预测模型</td>
</tr>
<tr>
<td>score()</td>
<td>score()</td>
<td>计算精确度</td>
</tr>
</tbody></table>
<p><code>完整knn代码</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="comment">#import numpy as np</span></span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_iris</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyKNN</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n_neighbors</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;指定近邻个数&#x27;&#x27;&#x27;</span></span><br><span class="line">        self.n_neighbors = n_neighbors <span class="comment"># 近邻数</span></span><br><span class="line">        <span class="comment"># self.x_new = [] # 预测数据集</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">predict</span>(<span class="params">self, x_new</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;预测模型, 更新近邻序列和得出测试数据所属类&#x27;&#x27;&#x27;</span></span><br><span class="line">        targetList = [] <span class="comment"># 存储预测数据的预测所属类</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(x_new)):</span><br><span class="line">            tp = x_new[i]</span><br><span class="line">            <span class="comment">#print(tp)</span></span><br><span class="line">            distList = self.get_deftDist(tp) <span class="comment"># 获取此时测试数据x_new[i]与预先序列的距离</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(self.x_train)):</span><br><span class="line">                Lmax = <span class="built_in">max</span>(distList)</span><br><span class="line">                L = <span class="number">0</span></span><br><span class="line">                <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(self.x_train[j])):</span><br><span class="line">                    L += (tp[k]-self.x_train[j][k])**<span class="number">2</span> <span class="comment"># 遍历训练集，计算当前x_new[i]训练集与x_train[j]的距离</span></span><br><span class="line">                L = math.sqrt(L)</span><br><span class="line">                <span class="keyword">if</span> L &gt;= Lmax:</span><br><span class="line">                    <span class="keyword">continue</span> <span class="comment"># 若当前所得距离大于预先序列距离的最大值，进入下一个训练数据</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="comment"># 更新预先序列中的距离和对应训练数据的id</span></span><br><span class="line">                    <span class="keyword">if</span> j <span class="keyword">not</span> <span class="keyword">in</span> self.idList:</span><br><span class="line">                        index = distList.index(Lmax) <span class="comment"># 获取最大预先距离的索引</span></span><br><span class="line">                        self.idList[index] = j <span class="comment"># 换为当前训练数据的id</span></span><br><span class="line">                        distList[index] = L <span class="comment"># 更新最大预先距离</span></span><br><span class="line">                <span class="comment">#distList[i].append(L)</span></span><br><span class="line">        <span class="comment">#return sorted(distList)</span></span><br><span class="line">            flag = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">            <span class="keyword">for</span> m <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(self.idList)): <span class="comment"># 遍历预先序列中，计算其中的多数类，判断测试数据属于哪类</span></span><br><span class="line">                indI = self.idList[m]</span><br><span class="line">                targetI = self.y_train[indI]</span><br><span class="line">                <span class="keyword">if</span> targetI == <span class="number">0</span>:</span><br><span class="line">                    flag[<span class="number">0</span>] += <span class="number">1</span></span><br><span class="line">                <span class="keyword">elif</span> targetI == <span class="number">1</span>:</span><br><span class="line">                    flag[<span class="number">1</span>] += <span class="number">1</span></span><br><span class="line">                <span class="keyword">elif</span> targetI == <span class="number">2</span>:</span><br><span class="line">                    flag[<span class="number">2</span>] += <span class="number">1</span></span><br><span class="line">                <span class="comment">#print(flag)</span></span><br><span class="line">            <span class="comment">#print(&#x27;测试数据所属类: &#x27;, flag.index(max(flag)))</span></span><br><span class="line">            targetList.append(flag.index(<span class="built_in">max</span>(flag))) <span class="comment"># 返回第一个极大值的索引值</span></span><br><span class="line">            <span class="comment">#print(&#x27;the distance:\n&#123;&#125;&#x27;.format(self.distList))</span></span><br><span class="line">        <span class="keyword">return</span> targetList</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_trainData</span>(<span class="params">self, x_train, y_train</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;获取训练集数据&#x27;&#x27;&#x27;</span></span><br><span class="line">        self.x_train = x_train</span><br><span class="line">        self.y_train = y_train</span><br><span class="line">        self.idList = random.sample(<span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(x_train)), self.n_neighbors) <span class="string">&#x27;&#x27;&#x27; 获取空间大小为k的预先序列,k个随机的元             </span></span><br><span class="line"><span class="string">        组,k=n_neighbors&#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="comment">#self.deftDic = &#123;&#x27;id&#x27;:self.idList, &#x27;distance&#x27;:self.distList, &#x27;target&#x27;:self.y_train&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_deftDist</span>(<span class="params">self, tp</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;计算测试数据与预先序列的距离&#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="built_in">list</span> = [] <span class="comment"># 存放预测数据与预先序列的距离，列表含有k个距离</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        for i in range(len(self.x_new)):</span></span><br><span class="line"><span class="string">            tp = self.x_new[i]</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(self.idList)):</span><br><span class="line">            <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">            index = self.idList[j]</span><br><span class="line">            <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(tp)):</span><br><span class="line">                <span class="built_in">sum</span> += (tp[k]-self.x_train[index][k])**<span class="number">2</span> </span><br><span class="line">            <span class="built_in">sum</span> = math.sqrt(<span class="built_in">sum</span>)</span><br><span class="line">            <span class="built_in">list</span>.append(<span class="built_in">sum</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">list</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">score</span>(<span class="params">self, y_pre, y_test</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;计算精确值&#x27;&#x27;&#x27;</span></span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        scoreList = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x: x[<span class="number">0</span>]-x[<span class="number">1</span>], <span class="built_in">zip</span>(y_pre, y_test)))</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> scoreList:</span><br><span class="line">            <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">                count += <span class="number">1</span></span><br><span class="line">        score = count/<span class="built_in">len</span>(scoreList)</span><br><span class="line">        <span class="keyword">return</span> score</span><br><span class="line"></span><br><span class="line"><span class="comment">#myDataset = &#123;&#x27;data&#x27;:[[2, 3, 0, 0], [3, 4, 0, 0], [4, 5, 0, 0], [5, 6, 0, 0]],</span></span><br><span class="line"><span class="comment">#             &#x27;target&#x27;:[2, 1, 0, 1]&#125;</span></span><br><span class="line"><span class="comment">#X_train, y_train = myDataset[&#x27;data&#x27;], myDataset[&#x27;target&#x27;]</span></span><br><span class="line"><span class="comment">#X_test = [[1, 2, 0, 0],[0, 0, 0, 0]]</span></span><br><span class="line"></span><br><span class="line">iris_dataset = load_iris()</span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(iris_dataset[<span class="string">&#x27;data&#x27;</span>], iris_dataset[<span class="string">&#x27;target&#x27;</span>], random_state=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">start = time.time()      </span><br><span class="line"></span><br><span class="line">knn = MyKNN(n_neighbors=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">knn.get_trainData(X_train, y_train)</span><br><span class="line">y_pre = knn.predict(X_test)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Holding time: &#x27;</span>, time.time()-start) <span class="comment"># 输出KNN运行时间，时间效率</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;the kind of X_test:\n&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(y_pre)) <span class="comment"># 输出测试数据的预测类别</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;the score:&#123;:.2&#125;&#x27;</span>.<span class="built_in">format</span>(knn.score(y_pre, y_test))) <span class="comment"># 输出模型精准度</span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/04/06/Python%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0KNN%E7%AE%97%E6%B3%95/" data-id="clg4u0zfm0003ogaaakst6cvx" data-title="python实现KNN算法" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-037-8复习" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/04/06/037-8%E5%A4%8D%E4%B9%A0/" class="article-date">
  <time class="dt-published" datetime="2023-04-06T02:29:41.000Z" itemprop="datePublished">2023-04-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%99%BE%E6%97%A5%E5%8D%9A%E5%AE%A2%E8%AE%A1%E5%88%92/">百日博客计划</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/04/06/037-8%E5%A4%8D%E4%B9%A0/">037-8复习</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>4月5号没记录，6号打算复习以往的题目</p>
<h3 id="vue3的响应式原理"><a href="#vue3的响应式原理" class="headerlink" title="vue3的响应式原理"></a>vue3的响应式原理</h3><p>ref</p>
<ol>
<li>返回响应式的、可更改的ref对象。只提供一个指向内部值的属性<code>.value</code></li>
</ol>
<p>reactive</p>
<ol>
<li>返回一个对象的代理，会深层的解包任何<code>ref</code>属性</li>
<li>数组中的ref元素或<code>Map</code>等原生集合类型，不会执行ref对象的解包</li>
</ol>
<h4 id="基于proxy实现数据绑定"><a href="#基于proxy实现数据绑定" class="headerlink" title="基于proxy实现数据绑定"></a>基于proxy实现数据绑定</h4><p>还没完成</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Vue</span>=&#123;</span><br><span class="line">    <span class="attr">$el</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">$data</span>:<span class="literal">null</span>,</span><br><span class="line">    <span class="attr">createApp</span>:<span class="keyword">function</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$data</span>=<span class="title function_">reactive</span>(obj.<span class="title function_">data</span>());</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mount</span>:<span class="keyword">function</span>(<span class="params">el</span>)&#123;</span><br><span class="line">        <span class="title class_">Compile</span>(el,<span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reactive</span>(<span class="params">data_obj</span>)&#123;</span><br><span class="line">    <span class="comment">// 代理 数据对象</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Proxy</span>(data_obj,&#123;</span><br><span class="line">        <span class="attr">get</span>:<span class="keyword">function</span>(<span class="params">target,propKey,receiver</span>)&#123;</span><br><span class="line">            <span class="comment">// $&#123;target.propKey&#125; 是 undefined，给一个具体属性名可以访问</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`proxy get: <span class="subst">$&#123;target.propKey&#125;</span>`</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target,propKey,receiver)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">set</span>:<span class="keyword">function</span>(<span class="params">target,propKey,value,receiver</span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`proxy set <span class="subst">$&#123;propKey&#125;</span>: <span class="subst">$&#123;value&#125;</span>`</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target,propKey,value,receiver)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模板解析，替换DOM</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Compile</span>(<span class="params">element,vm</span>)&#123;</span><br><span class="line">    vm.<span class="property">$el</span>=<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(element);</span><br><span class="line">    <span class="keyword">const</span> fragment=<span class="variable language_">document</span>.<span class="title function_">createDocumentFragment</span>();</span><br><span class="line">    <span class="keyword">let</span> child;</span><br><span class="line">    <span class="keyword">while</span>(child=vm.<span class="property">$el</span>.<span class="property">firstChild</span>)&#123;</span><br><span class="line">        fragment.<span class="title function_">append</span>(child);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(fragment);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(fragment.<span class="property">childNodes</span>);</span><br><span class="line">    <span class="title function_">fragment_compile</span>(fragment)</span><br><span class="line">    <span class="comment">// 替换内容</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fragment_compile</span>(<span class="params">node</span>)&#123;</span><br><span class="line">        <span class="keyword">const</span> pattern=<span class="regexp">/\&#123;\&#123;\s*(\S+)\s*\&#125;\&#125;/</span>;</span><br><span class="line">        <span class="keyword">if</span>(node.<span class="property">nodeType</span>===<span class="number">3</span>)&#123;</span><br><span class="line">            <span class="keyword">let</span> result=pattern.<span class="title function_">exec</span>(node.<span class="property">nodeValue</span>)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(result[<span class="number">0</span>])</span><br><span class="line">            node.<span class="property">nodeValue</span>.<span class="title function_">replace</span>(result[<span class="number">0</span>],vm.<span class="property">$data</span>.<span class="property">result</span>[<span class="number">1</span>])</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        node.<span class="property">childNodes</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">child</span>=&gt;</span>&#123;<span class="title function_">fragment_compile</span>(child)&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>阿婆主：&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>更多：&#123;&#123;more.like&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;more.like&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./vue3数据绑定.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">name</span>: <span class="string">&#x27;蛋老师&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">more</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">like</span>: <span class="string">&#x27;一键三连&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/04/06/037-8%E5%A4%8D%E4%B9%A0/" data-id="clg4u0zfh0000ogaa64463qee" data-title="037-8复习" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A/" rel="tag">数据绑定</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-036歇一天" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/04/04/036%E6%AD%87%E4%B8%80%E5%A4%A9/" class="article-date">
  <time class="dt-published" datetime="2023-04-04T15:27:51.000Z" itemprop="datePublished">2023-04-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%99%BE%E6%97%A5%E5%8D%9A%E5%AE%A2%E8%AE%A1%E5%88%92/">百日博客计划</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/04/04/036%E6%AD%87%E4%B8%80%E5%A4%A9/">036歇一天</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="https-的基本概念"><a href="#https-的基本概念" class="headerlink" title="https 的基本概念"></a>https 的基本概念</h3><p>https:是以安全为目标的 HTTP 通道，即 HTTP 下 加入 SSL 层进行加密。 </p>
<p>https 协议的作用：建立一个信息安全通道，来确保数据的传输，确保网站的真实性。</p>
<h3 id="http-和-https-的区别？"><a href="#http-和-https-的区别？" class="headerlink" title="http 和 https 的区别？"></a>http 和 https 的区别？</h3><ul>
<li>http 是超文本传输协议，信息是明文传输，https 则是具有安全性的 ssl 加密传输协议。</li>
<li>Https 协议需要 ca 证书，费用较高。 </li>
<li>使用不同的链接方式，端口也不同，一般，http 协议的端口为 80，https 的端口为 443。</li>
<li>http 的连接很简单，是无状态的。</li>
</ul>
<blockquote>
<p>记忆口诀：明文传输超文本，安全等级各不同。CA证书费用高，无状连接端难同。</p>
</blockquote>
<h4 id="https-协议的工作原理"><a href="#https-协议的工作原理" class="headerlink" title="https 协议的工作原理"></a>https 协议的工作原理</h4><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c42bc6f45451457fa6d614fb27534516~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p>客户端在使用 HTTPS 方式与 Web 服务器通信时有以下几个步骤：</p>
<ol>
<li>客户端使用 https url 访问服务器，则要求 web 服务器<code>建立 ssl 链接</code>。</li>
<li>web 服务器接收到客户端的请求之后，会<code>将网站的证书（证书中包含了公钥），传输给客户端</code>。</li>
<li>客户端和 web 服务器端开始<code>协商 SSL 链接的安全等级</code>，也就是加密等级。</li>
<li>客户端浏览器通过双方协商一致的安全等级，<code>建立会话密钥</code>，然后通过网站的公钥来加密会话密钥，并传送给网站。</li>
<li>web 服务器<code>通过自己的私钥解密出会话密钥</code>。</li>
<li>web 服务器<code>通过会话密钥加密与客户端之间的通信</code>。</li>
</ol>
<blockquote>
<p>记忆口诀：一连二传三协商，四建五得六使用。</p>
</blockquote>
<h4 id="https-协议的优缺点"><a href="#https-协议的优缺点" class="headerlink" title="https 协议的优缺点"></a>https 协议的优缺点</h4><ul>
<li>HTTPS 协议要比 http 协议<code>安全</code>，可防止数据在传输过程中被窃取、改变，确保数据的完整性。</li>
<li>https 握手阶段比较<code>费时</code>，会使页面加载时间延长 50%，增加 10%~20%的耗电。 </li>
<li>https <code>缓存</code>不如 http 高效，会增加数据开销。 </li>
<li>SSL 证书也需要钱，功能越强大的<code>证书费</code>用越高。 </li>
<li>SSL 证书需要绑定 <code>IP</code>，不能再同一个 ip 上绑定多个域名，ipv4 资源支持不了这种消耗。</li>
</ul>
<h3 id="TCP三次握手"><a href="#TCP三次握手" class="headerlink" title="TCP三次握手"></a>TCP三次握手</h3><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/baf3d5df95a74f47a1d779ee50c3411f~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<ol>
<li>第一次握手：<code>建立连接时，客户端发送syn包（syn=j）到服务器，并进入SYN_SENT状态，等待服务器确认</code>；SYN：同步序列编号（Synchronize Sequence Numbers）。</li>
<li>第二次握手：<code>服务器收到syn包并确认客户的SYN</code>（ack&#x3D;j+1），<code>同时也发送一个自己的SYN包</code>（syn&#x3D;k），即SYN+ACK包，此时服务器进入SYN_RECV状态；</li>
<li>第三次握手：<code>客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ack=k+1）</code>，此包发送完毕，客户端和服务器进入ESTABLISHED（TCP连接成功）状态，完成三次握手。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">握手过程中传送的包里不包含数据，三次握手完毕后，客户端与服务器才正式开始传送数据。</span><br></pre></td></tr></table></figure>


<h3 id="TCP-四次挥手"><a href="#TCP-四次挥手" class="headerlink" title="TCP 四次挥手"></a>TCP 四次挥手</h3><ol>
<li><code>客户端进程发出连接释放报文</code>，并且停止发送数据。释放数据报文首部，FIN&#x3D;1，其序列号为seq&#x3D;u（等于前面已经传送过来的数据的最后一个字节的序号加1），此时，客户端进入FIN-WAIT-1（终止等待1）状态。 TCP规定，FIN报文段即使不携带数据，也要消耗一个序号。</li>
</ol>
<p>2）<code>服务器收到连接释放报文，发出确认报文</code>，ACK&#x3D;1，ack&#x3D;u+1，并且带上自己的序列号seq&#x3D;v，此时，服务端就进入了CLOSE-WAIT（关闭等待）状态。TCP服务器通知高层的应用进程，客户端向服务器的方向就释放了，这时候处于半关闭状态，即客户端已经没有数据要发送了，但是服务器若发送数据，客户端依然要接受。这个状态还要持续一段时间，也就是整个CLOSE-WAIT状态持续的时间。</p>
<p>3）客户端收到服务器的确认请求后，此时，客户端就进入FIN-WAIT-2（终止等待2）状态，等待服务器发送连接释放报文（在这之前还需要接受服务器发送的最 后的数据）。</p>
<p>4）<code>服务器将最后的数据发送完毕后，就向客户端发送连接释放报文</code>，FIN&#x3D;1，ack&#x3D;u+1，由于在半关闭状态，服务器很可能又发送了一些数据，假定此时的序列号为seq&#x3D;w，此时，服务器就进入了LAST-ACK（最后确认）状态，等待客户端的确认。</p>
<p>5）<code>客户端收到服务器的连接释放报文后，必须发出确认</code>，ACK&#x3D;1，ack&#x3D;w+1，而自己的序列号是seq&#x3D;u+1，此时，客户端就进入了TIME-WAIT（时间等待）状态。注意此时TCP连接还没有释放，必须经过2∗∗MSL（最长报文段寿命）的时间后，当客户端撤销相应的TCB后，才进入CLOSED状态。</p>
<p>6）服务器只要收到了客户端发出的确认，立即进入CLOSED状态。同样，撤销TCB后，就结束了这次的TCP连接。可以看到，服务器结束TCP连接的时间要比客户端早一些。</p>
<h3 id="TCP和UDP的区别"><a href="#TCP和UDP的区别" class="headerlink" title="TCP和UDP的区别"></a>TCP和UDP的区别</h3><ol>
<li><p>TCP是面向<code>连接</code>的，而UDP是面向无连接的。</p>
</li>
<li><p>TCP仅支持<code>单播传输</code>，UDP 提供了单播，多播，广播的功能。</p>
</li>
<li><p>TCP的三次握手保证了连接的<code>可靠性</code>; UDP是无连接的、不可靠的一种数据传输协议，首先不可靠性体现在无连接上，通信都不需要建立连接，对接收到的数据也不发送确认信号，发送端不知道数据是否会正确接收。</p>
</li>
<li><p>UDP的<code>头部开销</code>比TCP的更小，数据<code>传输速率更高</code>，<code>实时性更好</code>。</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/04/04/036%E6%AD%87%E4%B8%80%E5%A4%A9/" data-id="clg2f76jy00000saab4mkgmyw" data-title="036歇一天" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TCP/" rel="tag">TCP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag">网络</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-035Vue第五天" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/04/03/035Vue%E7%AC%AC%E4%BA%94%E5%A4%A9/" class="article-date">
  <time class="dt-published" datetime="2023-04-03T13:11:41.000Z" itemprop="datePublished">2023-04-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%99%BE%E6%97%A5%E5%8D%9A%E5%AE%A2%E8%AE%A1%E5%88%92/">百日博客计划</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/04/03/035Vue%E7%AC%AC%E4%BA%94%E5%A4%A9/">035Vue第五天</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>继续开发VideoTV项目，遇到两个问题：</p>
<ol>
<li>对响应式对象赋值需要注意，有时会破坏掉其响应式链，导致数据没有动态绑定；</li>
<li>如果绑定了video的src，数据变化后仍无法播放，需要给video设置<code>ref</code>属性，数据获取成功后，调用<code>this.$refs.refName.load()</code>。</li>
</ol>
<h3 id="v-if和v-for"><a href="#v-if和v-for" class="headerlink" title="v-if和v-for"></a>v-if和v-for</h3><p>vue2中，v-for的优先级大于v-if，每次渲染都会先循环再判断，带来性能的浪费。<br>而vue3中，v-if的优先级大于v-for，if无法访问到for定义域中定义的变量别名，会抛出错误。<br>总结，v-if和v-for的优先级本身就不明显，加上会造成性能浪费，所以需要将v-if和for拆开，不能放在同一个节点上。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/04/03/035Vue%E7%AC%AC%E4%BA%94%E5%A4%A9/" data-id="clg0v3oxy00008saacbci36zr" data-title="035Vue第五天" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/" rel="tag">Vue</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-034Vue第四天" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/04/02/034Vue%E7%AC%AC%E5%9B%9B%E5%A4%A9/" class="article-date">
  <time class="dt-published" datetime="2023-04-02T14:28:55.000Z" itemprop="datePublished">2023-04-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%99%BE%E6%97%A5%E5%8D%9A%E5%AE%A2%E8%AE%A1%E5%88%92/">百日博客计划</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/04/02/034Vue%E7%AC%AC%E5%9B%9B%E5%A4%A9/">034Vue第四天</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>今天主要写<code>VideoTV</code>项目的代码，遇到一个问题，最新的数据没有渲染到模板中。Vue面试题看一题吧。</p>
<h3 id="data为什么是个函数"><a href="#data为什么是个函数" class="headerlink" title="data为什么是个函数"></a>data为什么是个函数</h3><p>一个组价是有多个实例的，这些实例本质上用的都是同一个构造函数，如果data是对象的话，修改一个实例中的data会影响到其他实例的数据，为确保不冲突，data必须是个函数。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/04/02/034Vue%E7%AC%AC%E5%9B%9B%E5%A4%A9/" data-id="clfzjnmpj0000lcaaealb5xbi" data-title="034Vue第四天" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/" rel="tag">Vue</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/data/" rel="tag">data()</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/4/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/">前端面试</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%99%BE%E6%97%A5%E5%8D%9A%E5%AE%A2%E8%AE%A1%E5%88%92/">百日博客计划</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%99%BE%E6%97%A5%E5%8D%9A%E5%AE%A2%E8%AE%A1%E5%88%92/%E4%BB%BF%E6%90%BA%E7%A8%8B%E7%BD%91%E7%AB%99/">仿携程网站</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DNS/" rel="tag">DNS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ES6/" rel="tag">ES6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/" rel="tag">JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MVVM/" rel="tag">MVVM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Object-defineProperty/" rel="tag">Object.defineProperty</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Promise/" rel="tag">Promise</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP/" rel="tag">TCP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/" rel="tag">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bind/" rel="tag">bind</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/computed/" rel="tag">computed</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/data/" rel="tag">data()</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eventloop/" rel="tag">eventloop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hide/" rel="tag">hide</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/keep-alive/" rel="tag">keep-alive</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/line-height/" rel="tag">line-height</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/new/" rel="tag">new</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nextTick/" rel="tag">nextTick</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/position/" rel="tag">position</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/promise/" rel="tag">promise</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/slot/" rel="tag">slot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/this%E5%AF%B9%E8%B1%A1/" rel="tag">this对象</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/uniapp/" rel="tag">uniapp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/watch/" rel="tag">watch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BD%9C%E7%94%A8%E5%9F%9F/" rel="tag">作用域</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%9F%E5%9E%8B/" rel="tag">原型</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B1%85%E4%B8%AD%E5%AF%B9%E9%BD%90/" rel="tag">居中对齐</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" rel="tag">数据类型</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A/" rel="tag">数据绑定</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/" rel="tag">生命周期</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag">网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8A%82%E6%B5%81%E9%98%B2%E6%8A%96/" rel="tag">节流防抖</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%97%AD%E5%8C%85/" rel="tag">闭包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A1%B9%E7%9B%AE/" rel="tag">项目</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 16px;">CSS</a> <a href="/tags/DNS/" style="font-size: 10px;">DNS</a> <a href="/tags/ES6/" style="font-size: 10px;">ES6</a> <a href="/tags/HTTP/" style="font-size: 10px;">HTTP</a> <a href="/tags/JS/" style="font-size: 14px;">JS</a> <a href="/tags/MVVM/" style="font-size: 10px;">MVVM</a> <a href="/tags/Object-defineProperty/" style="font-size: 10px;">Object.defineProperty</a> <a href="/tags/Promise/" style="font-size: 10px;">Promise</a> <a href="/tags/React/" style="font-size: 20px;">React</a> <a href="/tags/TCP/" style="font-size: 10px;">TCP</a> <a href="/tags/Vue/" style="font-size: 18px;">Vue</a> <a href="/tags/bind/" style="font-size: 10px;">bind</a> <a href="/tags/computed/" style="font-size: 10px;">computed</a> <a href="/tags/data/" style="font-size: 10px;">data()</a> <a href="/tags/eventloop/" style="font-size: 10px;">eventloop</a> <a href="/tags/hexo/" style="font-size: 14px;">hexo</a> <a href="/tags/hide/" style="font-size: 10px;">hide</a> <a href="/tags/keep-alive/" style="font-size: 10px;">keep-alive</a> <a href="/tags/line-height/" style="font-size: 10px;">line-height</a> <a href="/tags/new/" style="font-size: 10px;">new</a> <a href="/tags/nextTick/" style="font-size: 10px;">nextTick</a> <a href="/tags/position/" style="font-size: 10px;">position</a> <a href="/tags/promise/" style="font-size: 10px;">promise</a> <a href="/tags/slot/" style="font-size: 10px;">slot</a> <a href="/tags/this%E5%AF%B9%E8%B1%A1/" style="font-size: 10px;">this对象</a> <a href="/tags/uniapp/" style="font-size: 14px;">uniapp</a> <a href="/tags/watch/" style="font-size: 10px;">watch</a> <a href="/tags/%E4%BD%9C%E7%94%A8%E5%9F%9F/" style="font-size: 10px;">作用域</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 10px;">前端</a> <a href="/tags/%E5%8E%9F%E5%9E%8B/" style="font-size: 10px;">原型</a> <a href="/tags/%E5%B1%85%E4%B8%AD%E5%AF%B9%E9%BD%90/" style="font-size: 10px;">居中对齐</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" style="font-size: 10px;">数据类型</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A/" style="font-size: 10px;">数据绑定</a> <a href="/tags/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/" style="font-size: 10px;">生命周期</a> <a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 12px;">网络</a> <a href="/tags/%E8%8A%82%E6%B5%81%E9%98%B2%E6%8A%96/" style="font-size: 10px;">节流防抖</a> <a href="/tags/%E9%97%AD%E5%8C%85/" style="font-size: 10px;">闭包</a> <a href="/tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 18px;">项目</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">五月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">四月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">三月 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/05/13/065Promise%E4%B8%8Easync%E3%80%81await/">065Promise与async、await</a>
          </li>
        
          <li>
            <a href="/2023/05/12/064Promise1/">064Promise1</a>
          </li>
        
          <li>
            <a href="/2023/05/11/063JS%E9%AB%98%E9%98%B6eventloop/">063JS高阶eventloop</a>
          </li>
        
          <li>
            <a href="/2023/05/10/062CSS%E5%93%8D%E5%BA%94%E5%BC%8F/">062CSS响应式</a>
          </li>
        
          <li>
            <a href="/2023/05/09/061%E9%87%8D%E5%90%AF%E7%99%BE%E6%97%A5%E9%A1%B9%E7%9B%AE/">061重启百日项目</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 yh0ng<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>